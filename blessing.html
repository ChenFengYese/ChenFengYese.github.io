<!DOCTYPE html>
<html lang="ch">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>自定义祝福</title>
    <link rel="stylesheet" href="https://www.xn--kiv4f.top/css/tooplate-style.css">
    <link rel="stylesheet" href="https://www.xn--kiv4f.top/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://blog.huangwx.cn/css/sweetalert.css">
    <script type="text/javascript" src="https://blog.huangwx.cn/js/sweetalert-dev.js"></script>
    <style>
        #box{
            background: url('https://w.wallhaven.cc/full/72/wallhaven-72kejo.jpg') no-repeat center;
            background-size: cover;
            position: fixed;
            inset: 0;
            display: block;
            opacity: 0; /*初始不透明度为0，图片都看不见*/
            transition: 3s; /*--重点--定义一个关于透明度的transition*/
        }
        #box.cycle-bg-image{
          opacity: 1; /*有active类的图片不透明度为1，即显示图片*/
        }

    </style>
</head>
<body>
    <audio size="20mm" autoplay="autoplay" controls="controls" src="music/backgroundmusic.mp3" loop="loop" preload="auto" style="display:none" __idm_id__="186384385"></audio>
<div class="cycle-bg-image" id="box"></div>
<div style="position:absolute;inset:0;">
<div class="tm-main-container">
    <div class="tm-top-container">
        <header class="tm-site-header-box tm-bg-dark">
          <h1 style="color:#1889ff;font-family:Georgia, serif" class="tm-site-title">Happy Birthday</h1>
          <p style="color:#1ff5ff ;font-family:STXingkai" class="mb-0 tm-site-subtitle">写上你的祝福语吧</p>
        </header>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="tm-content">
                    <section class="tm-section tm-section-3 tm-section-left" style="display: block;">
                <form action="" class="tm-contact-form">
                  <div class="form-group mb-4">
                    <input type="text" id="contact_name" name="contact_name" class="form-control" placeholder="姓名" required="">
                  </div>
                  <div class="form-group mb-4">
                    <input type="text" id="contact_name2" name="contact_name" class="form-control" placeholder="对方姓名" required="">
                  </div>
                  <div class="form-group mb-4">
                    <textarea rows="4" id="contact_message" name="contact_message" class="form-control" placeholder="想对他说的话" required="" style="height: 118px;"></textarea>
                  </div>
                  <div class="form-group mb-0">
                      <button type="button" id="viewinf" class="btn tm-send-btn tm-fl-right" onclick="view()">
                      显示更多
                    </button>
                    <button type="button" class="btn tm-send-btn tm-fl-right" onclick="btn()">
                      提交
                    </button>
                  </div>
                </form>
              </section>
                </div>
            <form class="tm-contact-form" method="post" id="moreinfo" style="display: none">
                  <div class="form-group mb-4">
                    <textarea rows="4" id="contact_info" name="contact_message" class="form-control"
                              placeholder="自定义话语，以|……|为分割单位，如|生日|快乐|，显示时分两个动画展示
|#cutdown n |表示倒计时n个动画，且每个动画展示从n到1的数字
#rectangle 表示显示出方形
更多东西可以自行摸索尝试，若有意见欢迎点击联系按钮，感谢你的支持" required="" style="height: 118px;"></textarea>
                  </div>
                <div class="form-group mb-4">
                    <input type="file" id="file" name="file" class="form-control" style="display:none" accept="audio/*">
                  </div>
                <button type="button" id="showfile" class="btn tm-send-btn tm-fl-right" onclick="btn_choice()">
                      选择音频文件
                    </button>
                <button type="button" class="btn tm-send-btn tm-fl-right" onclick="btn_info()">
                      提交
                    </button>
                <button type="button" class="btn tm-send-btn tm-fl-right" onclick="contact()">
                      联系
                    </button>
                <span id="save" style="display:none"></span>
            </form>
            </div></div>
            </div>
        </div>
    </div>
<script>
     function IsPC(){
     var userAgentInfo = navigator.userAgent;
     var Agents = ["Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod"];
     var flag = true;
     for (var v = 0; v < Agents.length; v++) {
         if (userAgentInfo.indexOf(Agents[v]) > 0) { flag = false; break; }
     }
     return flag;
  }
    document.querySelector('#file').onchange = function (){
                document.getElementById("save").innerHTML = getFileURL(this.files[0]);
                document.getElementById("showfile").innerHTML = "已提交"+this.files[0].name;
        };
    function getFileURL(file) {
                var getUrl = null;
                if (window.createObjectURL !== undefined) { // basic
                    getUrl = window.createObjectURL(file);
                } else if (window.URL !== undefined) { // mozilla(firefox)
                    getUrl = window.URL.createObjectURL(file);
                } else if (window.webkitURL !== undefined) { // webkit or chrome
                    getUrl = window.webkitURL.createObjectURL(file);
                }
                return getUrl;
            }
    function btn_choice() {
        document.getElementById("file").click();

    }
    function contact(){undefined;
        window.open('https://wpa.qq.com/msgrd?v=3&uin=3107663466&site=qq&menu=yes')
    }
    function btn() {
        if (/(Android)/i.test(navigator.userAgent)) {
swal("加载失败","当前手机端浏览器无法进行自定义设计，将为您跳转到默认样式链接，我们为您的糟糕体验感到很抱歉，在未来我们将不断进行优化以满足用户更多需求，感谢你的支持。")
            window.location.href ="happybirthday.html";}
            else{
                var inf1 = document.getElementById("contact_name").value;
                var inf2 = document.getElementById("contact_name2").value;
                var inf3 = document.getElementById("contact_message").value;
                function isnull(val) {
                    var str = val.replace(/(^\s*)|(\s*$)/g, '');//去除空格;
                    return str === '' || str === undefined || str == null;
                }

                if ((!isnull(inf1)) && (!isnull(inf2))  && (!isnull(inf3)) ) {
                    swal("提交成功！","欢迎进行更多尝试","success");
                    document.getElementById("contact_info").value = "";
                    window.open('happybirth.html');
                }
                else{
                    swal("提交失败","当前信息未全部填写或仅填写空格")
                }
            }
    }
    function view(){
        if(document.getElementById("moreinfo").style.display !=="block")
        {document.getElementById("moreinfo").style.display ="block";
        document.getElementById("viewinf").innerHTML = "已显示"}
        else{
            document.getElementById("moreinfo").style.display ="none";
            document.getElementById("viewinf").innerHTML = "显示更多"
        }
    }
    function btn_info(){
        if (/(Android)/i.test(navigator.userAgent)) {
swal("加载失败","当前手机端浏览器无法进行自定义设计，将为您跳转到默认样式链接，我们为您的糟糕体验感到很抱歉，在未来我们将不断进行优化以满足用户更多需求，感谢你的支持。")
                        window.location.href ="happybirthday.html";}
            else{
                var inf = document.getElementById("contact_info").value;
                function isnull(val) {
                    var str = val.replace(/(^\s*)|(\s*$)/g, '');//去除空格;
                    return str === '' || str === undefined || str == null;
                }
                if (!isnull(inf)){swal("提交成功！","欢迎进行更多尝试","success")
                    document.getElementById("contact_name").value = "";
                    document.getElementById("contact_name2").value = "";
                    document.getElementById("contact_message").value = "";
                    window.open('happybirth.html');
                }
                else{
                    swal("提交失败","当前信息未全部填写或仅填写空格")
                }
            }
    }

        var urls = ["https://w.wallhaven.cc/full/72/wallhaven-72kejo.jpg","https://w.wallhaven.cc/full/8o/wallhaven-8owjzk.jpg","https://w.wallhaven.cc/full/rd/wallhaven-rdxr6j.jpg","https://w.wallhaven.cc/full/v9/wallhaven-v9r7dl.png",
        "https://w.wallhaven.cc/full/rd/wallhaven-rdxov1.jpg","https://w.wallhaven.cc/full/8o/wallhaven-8o12go.jpg"];
        var i=1;//表示当前图片所在位置
        var time = setTimeout("showImg()", 20000);//启动时钟事件刷新时间 1000==1秒
        imgs = document.getElementById("box");
        function icon_left(){
            clearTimeout(time);//清楚时钟事件
            if(i<=1){
                i=6;
            }else{
                i=i-2;
            }
            console.info(i);
            showImg()
        }
        function slideOff() {
            imgs.className="1"; //图片淡出

        }
        function slideOn() {
            imgs.className="cycle-bg-image"; //图片淡入
        }
        function icon_right(){
            clearTimeout(time);//清楚时钟事件
            showImg()
        }
        function showImg() { //让背景图片显示
            slideOff();
            i++;
            if(i === 7) {
                i = 1;
            }
            document.getElementById("box").style.background = "url("+urls[i-1]+") no-repeat center";
            slideOn();
            //通过id获取标签并修改背景样式
            time = setTimeout("showImg()", 20000);//启动时钟事件刷新时间 1000==1秒
        }
</script>
</body>
</html>
